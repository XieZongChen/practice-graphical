<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      body {
        font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
        width: 700px;
        height: 500px;
        position: relative;
      }

      svg {
        width: 100%;
        height: 100%;
      }

      path.slice {
        stroke-width: 2px;
      }

      polyline {
        opacity: 0.3;
        stroke: black;
        stroke-width: 0.4px;
        fill: none;
      }
    </style>
    <script src="http://d3js.org/d3.v3.min.js"></script>
  </head>
  <body>
    <button class="randomize">随机</button>
  </body>
  <script>
    // 结构布局
    const svg = d3.select('body').append('svg').append('g');

    svg.append('g').attr('class', 'slices');
    svg.append('g').attr('class', 'labels');
    svg.append('g').attr('class', 'lines');

    const width = 700,
      height = 450,
      radius = Math.min(width, height) / 2;

    svg.attr('transform', 'translate(' + width / 2 + ',' + height / 2 + ')');

    // 饼图布局
    const pie = d3.layout
      .pie()
      .sort(null) // 禁用对扇形的排序
      .value(function (d) {
        return d.value;
      });

    // 创建名为 arc 的弧形生成器
    const arc = d3.svg
      .arc()
      .outerRadius(radius * 0.8) // 外半径
      .innerRadius(radius * 0.4); // 内半径

    // 创建名为 outerArc 的弧形生成器
    const outerArc = d3.svg
      .arc()
      .innerRadius(radius * 0.9) // 内半径
      .outerRadius(radius * 0.9); // 外半径

    // 用于指定数据的唯一标识
    const key = function (d) {
      return d.data.label;
    };

    // 定义颜色比例尺
    const color = d3.scale
      .ordinal() // 创建离散的比例尺
      // 定义比例尺的输入域，即标签数组
      .domain([
        'Rose',
        'Sunflower',
        'Tulip',
        'Orchid',
        'Lily',
        'Jasmine',
        'Lavender',
        'Cherry Blossom',
        'Maple',
        'Bamboo',
        'Cactus',
      ])
      // 定义比例尺的输出范围，即颜色数组
      .range([
        '#142403 ',
        '#32520e ',
        '#226232 ',
        '#207134',
        '#2C9747 ',
        '#36BF59 ',
        '#57D177',
        '#7FDD97 ',
        '#A6E8B7',
        '#a6f5ba',
        '#f2fce5',
      ]);

    // 随机生成数据
    function randomData() {
      const labels = color.domain();
      return labels.map(function (label) {
        return { label: label, value: Math.random() };
      });
    }

    
  </script>
</html>
